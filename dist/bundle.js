function checkWinner(d){const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let f=0;f<e.length;f++){const[g,a,b]=e[f];if(" "!==d[g]&&d[g]===d[a]&&d[g]===d[b])return{gameover:!0,winner:d[g]}}for(let a=0;a<d.length;a++)if(" "===d[a])return{gameover:!1,winner:"no winner"};return{gameover:!0,winner:"no winner"}}function minimax(a,b){var c=Math.max,d=Math.min;let e=a,f=checkWinner(e);if(f.gameover)return"X"===f.winner?-1:"O"===f.winner?1:0;if(b){// minimise for player
let a=100;for(let c=0;c<e.length;c++)" "===e[c]&&(e[c]="X",a=d(a,minimax(e,!b)),e[c]=" ");return a}else{// maximise for computer
let a=-100;for(let d=0;d<e.length;d++)" "===e[d]&&(e[d]="O",a=c(a,minimax(e,!b)),e[d]=" ");return a}}function getBestMove(a,b){let c=a,d={score:-10,square:-1};if(!b)for(let a=0;a<c.length;a++){if(" "!==c[a])continue;c[a]="O";let e=minimax(c,!b);e>d.score&&(d.score=e,d.square=a),c[a]=" "}return d}let boardState=Array(9),playerTurn=!0,gameState={gameover:!1,winner:"no winner"};const squares=document.querySelectorAll(".item");squares.forEach(a=>{a.addEventListener("click",turn)});const resetBtn=document.querySelector("#reset");resetBtn.addEventListener("click",reset);const computerTurnBtn=document.querySelector("#computer-turn");computerTurnBtn.addEventListener("click",()=>{const a=getBestMove(boardState,playerTurn);if(-1>a.score)return void console.log("it is your turn");const b=document.getElementById(a.square);b.innerText="O",boardState[a.square]="O",playerTurn=!playerTurn});function reset(){setup(),gameState={gameover:!1,winner:"no winner"},playerTurn=!0}function setup(){for(let a=0;9>a;a++)boardState[a]=" ",squares[a].innerText=" "}function announceWinner(){const a=document.createElement("div"),b=document.createElement("h1");b.innerText=`The winner is... ${gameState.winner}`,a.appendChild(b),document.body.appendChild(a)}function turn(a){console.log(`innertext: ${a.target.innerText}, id: ${a.target.id}`);gameState.gameover||" "===a.target.textContent&&(playerTurn?(a.target.innerText="X",boardState[a.target.id]="X"):(a.target.innerText="O",boardState[a.target.id]="O"),gameState=checkWinner(boardState),gameState.gameover&&announceWinner(),playerTurn=!playerTurn)}setup();
